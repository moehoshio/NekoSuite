# wish/config.yaml
# 祈愿模块配置文件

# 新版奖励配置格式：
# items:
#   <minecraft:item>:
#     probability: 概率 (大於1時視為百分比，0-1 視為直接機率)
#     amount: 数量 (支持单值或范围 "1-3")
#     display_model: (可选) 详细页显示时使用的 custom_model_data 值
#     commands: 
#       - "/abc {player} {amount}" # 如果存在则执行命令，不直接 give 物品
#       - ...
#     subList: # 可选，继续使用相同格式
#       <minecraft:item>:
#         probability: ...

# 祈愿池显示配置说明 (display section):
#   material: 物品材质类型 (如 PAPER, NETHER_STAR 等)
#   custom_model_data: 自定义模型数据值 (整数)
#     注意: custom_model_data 需要客户端安装相应的资源包才能显示自定义贴图
#     资源包需要包含对应的 JSON 模型文件，将 custom_model_data 值映射到自定义贴图
#     如果没有资源包，物品将显示为默认材质
#   name: 显示名称 (支持颜色代码)
#   description: 描述文字列表 (支持颜色代码)

# 詳細頁菜單按鈕配置 (menu_buttons section):
#   wish_1x/wish_5x:
#     material: 按钮使用的材质
#     custom_model_data: 按钮的 custom_model_data 值
menu_buttons:
    wish_1x:
        material: "PAPER"
        custom_model_data: 1101
    wish_5x:
        material: "PAPER"
        custom_model_data: 1100

# 數據存儲配置
storage:
    # 存儲類型: yaml, sqlite 和 mysql (未來支持)
    type: "yaml"
    # 數據存儲目錄
    data_dir: "userdata"

history:
    max_size: 100 # 祈愿历史记录最大条数。当你使用yaml存储时不要设定太多，这会造成性能问题。
    expiration: 30d # 超过多久的记录会被清理

# 祈愿券配置
tickets:

    # deduct_mode:
    # flexible: 以次数抵扣，如： 券有10次，抽多少就减多少
    # fixed: 只能用于特定次数的祈愿券，如十连券
    
    - id: "Sigil of Stars"
      applicable_pools:
          - "StarPath"
          - "StarryMirage"
      deduct_count: 1
      deduct_mode: "flexible"

    - id: "Token of Crimson Vow"
      applicable_pools:
          - "OathOfTheRedRose"
      deduct_count: 1
      deduct_mode: "flexible"

    - id: "Dawnlight Slip"
      applicable_pools:
          - "StarPath"
          - "StarryMirage"
      deduct_count: 1
      deduct_mode: "flexible"

# 祈愿池配置
pools:
    # 星途
    StarPath:
        display:
            material: "PAPER"
            custom_model_data: 1202
            name: "&e星途"
            description:
                - "&7[ &o初心未改，步步皆光 &7]"
                - ""
                - "&b星光始终于空中闪耀，指引踏上旅途的人"
        counts_name: "StarPath" # 如果所有祈愿池填写相同名即可共享计数
        max_count: 200
        cost:
            "1": 80
            "5": 400
        auto_cost: false
        items:
            minecraft:iron_ingot:
                probability: 25.0
                amount: 5
            minecraft:experience_bottle:
                probability: 20.0
                amount: 50
                commands:
                    - "minecraft:xp add {player} {amount} points"
            minecraft:gold_ingot:
                probability: 18.0
                amount: 5
            minecraft:diamond:
                probability: 15.0
                amount: 2
            purified_water_canteen:
                probability: 12.0
                display_model: 5400
                commands:
                    - "minecraft:give {player} toughasnails:purified_water_canteen 1"
            p_point:
                probability: 12.0
                amount: 5
                display_model: 5100
                commands:
                    - "minecraft:give {player} touhou_little_maid:power_point {amount}"
            minecraft:netherite_scrap:
                probability: 5.0
            potion_power:
                probability: 5.0
                display_material: "minecraft:potion"
                commands:
                    - 'minecraft:give {player} minecraft:potion{CustomPotionEffects:[{Id:5,Duration:3600,Amplifier:2}],display:{Name:"{\"text\":\"力量药水\"}"}} 1'
            goety:recallfocus:
                probability: 2.0
                display_model: 5202
            KirinOverlordBlazingArmor:
                probability: 0.246
                display_material: "minecraft:golden_chestplate"
                enchanted: true
                commands:
                    - "artifact give {player} KirinOverlordBlazingArmor"
        guarantee_items:
            KirinOverlordBlazingArmor:
                probability: 1
                commands:
                    - "artifact give {player} KirinOverlordBlazingArmor"

    # 星光如梦
    StarryMirage:
        display:
            material: "PAPER"
            custom_model_data: 1104
            name: "&b星光如梦"
            description:
                - "&7[ &o星河倒映梦中影，浮光织就幻世形 &7]"
                - ""
                - "&7星光幻梦将于 2025-&509-01&7 前消退"
        limit_modes:
            count: 999
            time: 24h
            refresh_at_time: "00:00"
        duration:
            startDate: "2025-08-01T00:00:00Z"
            endDate: "2025-08-31T23:59:59Z"
        counts_name: "StarryMirage"
        max_count: 200
        cost:
            "1": 80
            "5": 400
        auto_cost: false
        items:
            minecraft:experience_bottle:
                probability: 20.0
                amount: 100
                commands:
                    - "minecraft:xp add {player} {amount} points"
            minecraft:end_rod:
                probability: 18.0
                amount: 12
            minecraft:phantom_membrane:
                probability: 16.0
                amount: 3
            buddycards:mystery_pack:
                probability: 16.0
                amount: 3
                display_model: 5300
            minecraft:diamond:
                probability: 16.0
                amount: 3
            goety:focusbag:
                probability: 5.0
                display_model: 5203
            minecraft:nether_star:
                probability: 2.0
            goety:iceologyfocus:
                probability: 1.0
                display_model: 5201
            goety:launchfocus:
                probability: 1.0
                display_model: 5200
            goety:star_amulet:
                probability: 1.0
                display_model: 5204
            CelestineBreezeHelm:
                probability: 0.246
                display_material: "minecraft:diamond_helmet"
                enchanted: true
                commands:
                    - "artifact give {player} CelestineBreezeHelm"
            SkywhisperBoots:
                probability: 0.246
                display_material: "minecraft:diamond_boots"
                enchanted: true
                commands:
                    - "artifact give {player} SkywhisperBoots"
            CloudspringAzureBlade:
                probability: 0.246
                display_material: "minecraft:diamond_sword"
                enchanted: true
                commands:
                    - "artifact give {player} CloudspringAzureBlade"
        guarantee_items:
            CelestineBreezeHelm:
                probability: 1
                commands:
                    - "artifact give {player} CelestineBreezeHelm"
            SkywhisperBoots:
                probability: 1
                commands:
                    - "artifact give {player} SkywhisperBoots"
            CloudspringAzureBlade:
                probability: 1
                commands:
                    - "artifact give {player} CloudspringAzureBlade"

    # 红玫的誓约 (情人节)
    OathOfTheRedRose:
        display:
            material: "PAPER"
            custom_model_data: 1203
            name: "&d红玫的誓约"
            description:
                - "&7[ &o情人节限定活动 &7]"
                - ""
                - "&d限时祈愿池"
        limit_modes:
            count: 999
            time: 24h
            refresh_at_time: "00:00"
        duration:
            startDate: "2026-02-14T00:00:00Z"
            endDate: "2026-03-31T23:59:59Z"
        counts_name: "OathOfTheRedRose"
        max_count: 200
        cost:
            "1": 80
            "5": 400
        auto_cost: false
        items:
            minecraft:prismarine_crystals:
                probability: 20.0
                amount: 5
            minecraft:quartz:
                probability: 10.0
                amount: 5
            lightmeals:flower_pie:
                probability: 10.0
                amount: 3
                display_material: "minecraft:pumpkin_pie"
            minecraft:enchanted_golden_apple:
                probability: 5.0
            minecraft:experience_bottle:
                probability: 20.0
                amount: 20
                commands:
                    - "minecraft:xp add {player} {amount} points"
            minecraft:quartz_block:
                probability: 10.0
                amount: 10
            biomesoplenty:pink_cherry_sapling:
                probability: 5.0
                display_model: 5500
            chimes:amethyst_chimes:
                probability: 3.0
                display_material: "minecraft:amethyst_shard"
            potion_revive:
                probability: 3.0
                display_material: "minecraft:potion"
                commands:
                    - 'minecraft:give {player} minecraft:potion{CustomPotionEffects:[{Id:10,Duration:3600,Amplifier:1}],display:{Name:"{\"text\":\"再生药水\"}"}} 1'
            UnrivaledCrimsonFeatherBow:
                probability: 0.246
                display_material: "minecraft:bow"
                enchanted: true
                commands:
                    - "artifact give {player} UnrivaledCrimsonFeatherBow"
        guarantee_items:
            UnrivaledCrimsonFeatherBow:
                probability: 1
                commands:
                    - "artifact give {player} UnrivaledCrimsonFeatherBow"

    # 微光之愿 (每日)
    GlimmeringPrayer:
        display:
            material: "SUNFLOWER"
            name: "&6微光之愿"
            description:
                - "&7[ &o一缕微光穿星夜，轻声祷语寄心愿 &7]"
                - ""
                - "&7每日曦光赠送恩赐，&e可进行一次祈愿"
        limit_modes:
            count: 1
            time: 1d
            refresh_at_time: "00:00"
        duration:
            startDate: "2025-01-01T00:00:00Z"
            endDate: "2099-12-31T23:59:59Z"
        counts_name: "GlimmeringPrayer"
        max_count: 100
        cost:
            "1": 0
        auto_cost: false
        items:
            bal15:
                probability: 25.0
                amount: 15
                display_material: "minecraft:gold_nugget"
                commands:
                    - "eco give {player} {amount}"
            bal30:
                probability: 20.0
                amount: 30
                display_material: "minecraft:gold_nugget"
                commands:
                    - "eco give {player} {amount}"
            bal60:
                probability: 10.0
                amount: 60
                display_material: "minecraft:gold_ingot"
                commands:
                    - "eco give {player} {amount}"
            bal100:
                probability: 5.0
                amount: 100
                display_material: "minecraft:gold_ingot"
                commands:
                    - "eco give {player} {amount}"
            bal200:
                probability: 2.0
                amount: 200
                display_material: "minecraft:gold_block"
                commands:
                    - "eco give {player} {amount}"
            bal500:
                probability: 0.5
                amount: 500
                display_material: "minecraft:gold_block"
                enchanted: true
                commands:
                    - "eco give {player} {amount}"
            bal1k:
                probability: 0.2
                amount: 1000
                display_material: "minecraft:gold_block"
                enchanted: true
                commands:
                    - "eco give {player} {amount}"
            bal5k:
                probability: 0.1
                amount: 5000
                display_material: "minecraft:gold_block"
                enchanted: true
                commands:
                    - "eco give {player} {amount}"
            bal10k:
                probability: 0.01
                amount: 10000
                display_material: "minecraft:gold_block"
                enchanted: true
                commands:
                    - "eco give {player} {amount}"
            xp20:
                probability: 20.0
                amount: 20
                display_material: "minecraft:experience_bottle"
                commands:
                    - "minecraft:xp add {player} {amount} points"
            xp100:
                probability: 10.0
                amount: 100
                display_material: "minecraft:experience_bottle"
                commands:
                    - "minecraft:xp add {player} {amount} points"
            touhou_little_maid:power_point:
                probability: 10.0
                amount: 5
                display_model: 5100
            op_equip:
                probability: 0.01
                display_material: "minecraft:diamond_chestplate"
                enchanted: true
                subList:
                    CloudspringAzureBlade:
                        probability: 1
                        commands:
                            - "artifact give {player} CloudspringAzureBlade"
                    UnrivaledCrimsonFeatherBow:
                        probability: 1
                        commands:
                            - "artifact give {player} UnrivaledCrimsonFeatherBow"
                    KirinOverlordBlazingArmor:
                        probability: 1
                        commands:
                            - "artifact give {player} KirinOverlordBlazingArmor"
            potions:
                probability: 20.0
                display_material: "minecraft:potion"
                subList:
                    minecraft:speed:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:speed 3600 2"
                    minecraft:haste:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:haste 3600 2"
                    minecraft:strength:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:strength 3600 2"
                    minecraft:instant_health:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:instant_health 1 1"
                    minecraft:jump_boost:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:jump_boost 3600 2"
                    minecraft:regeneration:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:regeneration 3600 2"
                    minecraft:resistance:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:resistance 3600 2"
                    minecraft:fire_resistance:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:fire_resistance 3600 1"
                    minecraft:water_breathing:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:water_breathing 3600 1"
                    minecraft:invisibility:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:invisibility 3600 1"
                    minecraft:night_vision:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:night_vision 3600 1"
                    minecraft:health_boost:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:health_boost 3600 2"
                    minecraft:absorption:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:absorption 3600 2"
                    minecraft:saturation:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:saturation 1 1"
                    minecraft:glowing:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:glowing 3600 1"
                    minecraft:levitation:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:levitation 200 1"
                    minecraft:luck:
                        probability: 1
                        commands:
                            - "minecraft:effect give {player} minecraft:luck 3600 1"
        guarantee_items:
            CloudspringAzureBlade:
                probability: 1
                commands:
                    - "artifact give {player} CloudspringAzureBlade"
            UnrivaledCrimsonFeatherBow:
                probability: 1
                commands:
                    - "artifact give {player} UnrivaledCrimsonFeatherBow"
            KirinOverlordBlazingArmor:
                probability: 1
                commands:
                    - "artifact give {player} KirinOverlordBlazingArmor"
