## NekoSuite coding guide
- Server plugin target: Spigot/Paper 1.16.5, Java 8, Vault (economy/permissions). Build with `mvn package -q`; jar lands at `target/nekosuite-bukkit-0.1.0-SNAPSHOT.jar`.
- Entry point: [main/java/com/moehoshio/nekosuite/NekoSuitePlugin.java](main/java/com/moehoshio/nekosuite/NekoSuitePlugin.java) registers every command/menu and wires managers; it also implements `Listener` for inventory clicks.
- I18n: [main/java/com/moehoshio/nekosuite/Messages.java](main/java/com/moehoshio/nekosuite/Messages.java) loads `language.yml` and `lang/*.yml`, supports hex colors (`&#RRGGBB`) and per-player language stored under `storage.data_dir` (defaults to `userdata`). Prefer `messages.format(...)` for text and `messages.getList(...)` for lore; item translation keys live under `items."minecraft:foo"`.
- Config copy-on-first-run: `onEnable` saves all `main/resources/*.yml`; runtime edits live in `plugins/NekoSuite/`. Keep defaults in `main/resources/` in sync when changing behavior.
- Menu layouts: [main/java/com/moehoshio/nekosuite/MenuLayout.java](main/java/com/moehoshio/nekosuite/MenuLayout.java) + [main/resources/menu_layout.yml](main/resources/menu_layout.yml) drive GUI sizes/slots. Lore lines containing `ACTION:` or `COMMAND:` act as click handlers for navigation.
- Tab completion: [main/java/com/moehoshio/nekosuite/TabConfig.java](main/java/com/moehoshio/nekosuite/TabConfig.java) + [main/resources/tab_config.yml](main/resources/tab_config.yml) define nested suggestions. Extend the YAML rather than hardcoding.
- Currency/permissions: Vault is accessed via `Economy` and `Permission`; if absent, related features short-circuit with user-facing errors. Check for `economy == null` before charging players.
- Persistent data pattern: most managers load a configurable `storage.data_dir` (default `userdata`) under the plugin data folder using `YamlConfiguration`; always call the managerâ€™s `saveUserData`/`loadUserData` helpers instead of rolling your own.
- Experience bank: [main/java/com/moehoshio/nekosuite/ExpManager.java](main/java/com/moehoshio/nekosuite/ExpManager.java) handles deposit/withdraw/pay/exchange menus. Exchange rewards are commands from [main/resources/exp_config.yml](main/resources/exp_config.yml) and enforce daily/total limits.
- Shop: [main/java/com/moehoshio/nekosuite/BuyManager.java](main/java/com/moehoshio/nekosuite/BuyManager.java) uses [main/resources/buy_config.yml](main/resources/buy_config.yml); categories include vip/mcd (time-based, with remaining-time conversion on upgrades) and bag (level-gated). Product lore uses `ID:` markers for click routing.
- Mail: [main/java/com/moehoshio/nekosuite/MailManager.java](main/java/com/moehoshio/nekosuite/MailManager.java) backs the mailbox GUI; rewards are executed console commands. Templates/settings live in [main/resources/mail_config.yml](main/resources/mail_config.yml); player mailboxes persist in `userdata/mail.inbox.*`.
- Teleport: [main/java/com/moehoshio/nekosuite/TeleportManager.java](main/java/com/moehoshio/nekosuite/TeleportManager.java) with [main/resources/tp_config.yml](main/resources/tp_config.yml) supports paid requests, admin locks, and per-player toggles. Pending requests are keyed by target UUID; accept/deny send interactive chat buttons.
- Games hub: `/neko` opens the navigation GUI (player head shows health/balance/xp) and routes to help and games menus defined in `menu_layout.yml`. Games include Random TP ([main/java/com/moehoshio/nekosuite/RandomTeleportGameManager.java](main/java/com/moehoshio/nekosuite/RandomTeleportGameManager.java)), Survival Arena, Fishing Contest, and the large Strategy Game.
- Strategy Game: [main/java/com/moehoshio/nekosuite/StrategyGameManager.java](main/java/com/moehoshio/nekosuite/StrategyGameManager.java) orchestrates a text-driven adventure with menus for events, battles, shops, equipment, and end rewards. State is persisted per player; menu IDs in lore (`ID:start_easy`, etc.) drive flow control.
- Random teleport game: [main/java/com/moehoshio/nekosuite/RandomTeleportGameManager.java](main/java/com/moehoshio/nekosuite/RandomTeleportGameManager.java) uses [main/resources/random_teleport_config.yml](main/resources/random_teleport_config.yml); tracks active sessions and timeouts, optionally strips permissions during play (stubbed for Vault integration).
- Navigation/help/games menus: inventory holders (`NavigationMenuHolder`, `HelpMenuHolder`, etc.) are used to identify click contexts in `InventoryClickEvent`; when adding new menus, create matching holders and handle clicks accordingly.
- Command surface: primary commands are defined in [main/resources/plugin.yml](main/resources/plugin.yml) and routed through `onCommand` in the plugin class (wish, event, exp, cdk, buy, mail, language, nekoreload, sgame, artifact, announce, neko/nekomenu, nekohelp, ntp/ntpadmin, skill, ngame). `/neko game` delegates to `/ngame`.
- Config-driven rewards: many modules dispatch console commands with `{player}` or `{id}` placeholders. Maintain placeholder consistency when adding new reward types.
- Color/text rendering: prefer `messages.colorize` or `messages.format` to keep hex colors and translation consistent; GUIs expect already-colored strings.
- Testing workflow: package with Maven, drop the jar into a Paper 1.16.5 test server with Vault + economy plugin, and exercise GUIs/commands with OP to verify config-driven menus and command rewards.
- When changing menu or tab layouts, update both the YAML and any slot assumptions in managers (e.g., Exp/Buy/Mail) to avoid out-of-bounds inventory writes.
- Keep per-feature configs in sync with code defaults: exp_config.yml (exchange limits/amounts), buy_config.yml (products), mail_config.yml (limits/templates), tp_config.yml (cost/timeout/default toggle), menu_layout.yml (slot maps), random_teleport_config.yml, survival_arena_config.yml, fishing_contest_config.yml, strategy_game_config.yml, artifact_rewards_config.yml, join_quit_config.yml, tab_config.yml, announcements.yml.
- Avoid hardcoding messages or materials; rely on config/i18n so server owners can localize and reskin menus.
- If adding new commands, register executor/tab-completer in `onEnable` and supply defaults in `plugin.yml`, `tab_config.yml`, and `language.yml`/`lang/*.yml`.

Questions or gaps? Tell me which workflows or modules need deeper notes.